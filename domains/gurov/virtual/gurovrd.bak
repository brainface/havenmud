#include <lib.h>
#include <domains.h>
inherit LIB_ROOM;

void SetupExits(int, int);
void SetupEncounters(int, int);

static void create(int x, int y) {
  ::create();
  SetLong(
    "The Gurov Road passes from the far east near Tairi to the far west "
    "near Keryth. All the lands of this valley are claimed by the Prince "
    "of Gurov, who rules from the capital city for which the Principality "
    "is named."
    );
  SetShort("The Principality of Gurov");
  SetupExits(x, y);
  SetupEncounters(x, y);     
}

void SetupExits(int x, int y) {
  if (y == 0) {
    AddExit("east", GUROV_VIRTUAL "gurovrd/" + (x + 1) + "," + y);
    AddExit("west", GUROV_VIRTUAL "gurovrd/" + (x - 1) + "," + y);
    }
  if (x == 40 && y == 0) {
    AddLong(" The Gurov Road connects here with the North Road that connects "
            "Grymxoria and Tairi.");
    AddExit("east", ESTERGRYM_VIRTUAL "northroad/1,40");
  }
  if (x == -40 && y == 0) {
    AddLong(" The Gurov Road merges to the west with a smaller road through "
            "the Western Wastes.");
    AddExit("west", FROSTMARCHES_VIRTUAL "frostmarchrd/0,30");
  }
  if (x == 0 && y >= 0) {
    AddExit("north", GUROV_VIRTUAL "gurovrd/" + (x) + "," + (y + 1));
    if (y) {
      AddExit("south", GUROV_VIRTUAL "gurovrd/" + (x) + "," + (y - 1));
      AddLong(" This part of the Gurov Road leads north and south from the main "
            "passage of the road to the capital city of the Principality. ");
           }
    if (!y) AddLong(" The road also branches to the north here, heading off "
                    "to the capital city of the Principality. ");
    if (y == 20) {
      AddExit("north", GUROV_TOWNS "gurov/room/gate");
    }
    if (y == 18) {
      AddLong(" A thin forest lies to the southwest.");
      AddExit("southwest", GUROV_AREAS "forest/room/f01");
    }
    if (y == 17) {
      AddLong(" A thin forest lies to the west.");
      AddExit("west", GUROV_AREAS "forest/room/f01");
    }
    if (y == 13) {
      AddLong(" A thin forest lies to the west.");
      AddExit("west", GUROV_AREAS "forest/room/f05");
    }
    if (y == 12) {
      AddLong(" A thin forest lies to the northwest.");
      AddExit("northwest", GUROV_AREAS "forest/room/f05");
      }
  }
 if (x == 0 && y == 0) {
    AddExit("south", GUROV_AREAS "gurthlad/rooms/room1");
    AddLong("To the south lie the dusty plains of Gurthlad.");
    }
}

void SetupEncounters(int x, int y) {
  if (!random(30)) AddInventory(GUROV_TOWNS "gurov/npc/farmer", 1);
  if (x == -40 && y == 0) {
    AddInventory(GUROV_TOWNS "gurov/npc/guard", 1);
  }
  if (x == 40 && y == 0) {
    AddInventory(GUROV_TOWNS "gurov/npc/guard", 1);
  }
}

  
